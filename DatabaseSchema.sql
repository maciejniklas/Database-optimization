/* TABLES */
CREATE TABLE Brewery
(
  breweryID NUMBER(9) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  addressID NUMBER(9) NOT NULL,
  breweryName VARCHAR2(100) NOT NULL
);

CREATE TABLE Address
(
  addressID NUMBER(9) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  country VARCHAR2(50) NOT NULL,
  town VARCHAR2(75) NOT NULL,
  street VARCHAR2(100) NOT NULL,
  zipCode CHAR(6) NOT NULL,
  CONSTRAINT ZipCodeCheck CHECK (zipCode LIKE '__-___')
);

CREATE TABLE BeerStyle
(
  beerStyleID NUMBER(9) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  styleName VARCHAR2(25) NOT NULL,
  standardReferenceMethod NUMBER(2) NOT NULL,
  europeanBreweryConvention NUMBER(2) NOT NULL
);

CREATE TABLE Beer
(
  beerID NUMBER(9) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  beerStyleID NUMBER(9) NOT NULL,
  beerPrice NUMBER(6, 2) NOT NULL,
  alcoholPercent NUMBER(3, 1) NOT NULL,
  beerAmountInLiters NUMBER(7, 2) NOT NULL
);

CREATE TABLE BeerInBreweries
(
  breweryID NUMBER(9) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  beerID NUMBER(9) NOT NULL
);

CREATE TABLE Keg
(
  kegID NUMBER(9) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  kegState VARCHAR2(10) NOT NULL,
  kegCapacity NUMBER(2) NOT NULL
);

CREATE TABLE BeerInKegs
(    
  beerID NUMBER(9) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  kegID NUMBER(9) NOT NULL
);

CREATE TABLE Employee
(    
  employeeID NUMBER(9) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  addressID NUMBER(9) NOT NULL,
  breweryID NUMBER(9) NOT NULL,
  firstName VARCHAR2(50) NOT NULL,
  lastName VARCHAR2(50) NOT NULL,
  birthDate DATE NOT NULL,
  salary NUMBER(7, 2) NOT NULL
);

/* FOREIGN KEYS */
ALTER TABLE Brewery ADD CONSTRAINT BreweryFK FOREIGN KEY (addressID) REFERENCES Address (addressID);
ALTER TABLE Employee ADD CONSTRAINT EmployeeFK1 FOREIGN KEY (breweryID) REFERENCES Brewery (breweryID);
ALTER TABLE Employee ADD CONSTRAINT EmployeeFK2 FOREIGN KEY (addressID) REFERENCES Address (addressID);
ALTER TABLE Beer ADD CONSTRAINT BeerFK FOREIGN KEY (beerStyleID) REFERENCES BeerStyle (beerStyleID);
ALTER TABLE BeerInBreweries ADD CONSTRAINT BeerInBreweriesFK1 FOREIGN KEY (breweryID) REFERENCES Brewery (breweryID) ON DELETE CASCADE;
ALTER TABLE BeerInBreweries ADD CONSTRAINT BeerInBreweriesFK2 FOREIGN KEY (beerID) REFERENCES Beer (beerID) ON DELETE CASCADE;
ALTER TABLE BeerInKegs ADD CONSTRAINT BeerInKegsFK1 FOREIGN KEY (beerID) REFERENCES Beer (beerID) ON DELETE CASCADE;
ALTER TABLE BeerInKegs ADD CONSTRAINT BeerInKegsFK2 FOREIGN KEY (kegID) REFERENCES Keg (kegID) ON DELETE CASCADE;